@model Site.Models.MainMenu.MainMenuApiConfig

<div class="modal-body" ng-controller="RequestListCtrl" ng-cloak x-ng-init="controller.init(@Json.Encode(Model.RequestUrl))">
    <div class="row">
        <button type="button" class="btn btn-default" ng-click="controller.requestAdd()">Добавить заявку</button>
    </div>
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Дата поступления</th>
                <th>Дата исполнения</th>
                <th>Статус</th>
                <th>Клиент</th>
                <th></th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="item in items">
                <td>
                    <span ng-bind="controller.date2IsoStr(item.CreationDate)"></span>
                </td>
                <td>
                    <span ng-bind="controller.date2IsoStr(item.ExecutionDate)"></span>
                </td>
                <td>
                    <span ng-bind="item.Status"></span>
                </td>
                <td>
                    <span ng-bind="item.ClientName"></span>
                </td>
                <td class="w-16">
                    <a class="btn-link" ng-click="controller.requestEdit(item.Id)" title="Редактировать" data-toggle="tooltip" data-placement="top">
                        <span class="glyphicon glyphicon-edit"></span>
                    </a>
                </td>
                <td class="w-16">
                    <a class="btn-link remove" title="Удалить" ng-click="controller.showRemoveDialog(item.Id)" data-toggle="tooltip" data-placement="left">
                        <span class="glyphicon glyphicon-remove"></span>
                    </a>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<script type="text/ng-template" id="requestRemoveDialog.html">
    <div class="modal-header">
        <button type="button" ng-click="controller.closeDialog()" class="close" data-dismiss="modal" aria-hidden="true">
            <span class="glyphicon glyphicon-remove"></span>
        </button>
        <h4 class="modal-title">Удаление заявки</h4>
    </div>
    <div class="modal-body">
        Вы уверены что хотите удалить заявку '<span ng-bind="currentItem.Name"></span>'?
    </div>
    <div class="modal-footer">
        <form action="#" method="POST">
            <button type="button" ng-click="controller.closeDialog()" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" ng-click="controller.requestRemove()" class="btn btn-primary">Yes</button>
        </form>
    </div>
</script>
