@model Site.Models.MainMenu.MainMenuApiConfig

<div class="container" ng-controller="UserCtrl" ng-cloak x-ng-init="controller.init(@Json.Encode(Model.UserUrl))">
    <div class="row">
        <button type="button" class="btn btn-default" href="@Url.Action("AddUser", "UserApi")">Добавить нового пользователя</button>
    </div>
    <div class="row">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Имя</th>
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in List">
                    <td>item.UserName</td>
                    <td class="glyphicon glyphicon-pencil"></td>
                    <td calss="glyphicon glyphicon-remove"></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

@section Scripts
{
    <script type="text/javascript">
        var Users;
        (function (Users) {
            'use strict';
            var UserCtrl = (function ($scope) {
                function UserCtrl($scope, $http) {
                    this.$scope = $scope;
                    this.$http = $http;
                    $scope.controller = this;
                }

                UserCtrl.prototype.init = function (configuration) {
                    var _this = this;
                    this.urlList = configuration.UserUrl;
                    this.$scope.items = [];

                    this.$http.get(this.urlList).then(function (args) {
                        _this.$scope.items = args.data.List;
                        notify("Items were loaded.");
                    }).catch(function (e) {
                        notify("Unable to get items: ");
                    }).finally(function () {

                    });
                };

                return UserCtrl;
            })();

            Users.UserCtrl = UserCtrl;
            UserCtrl.$inject = ['$scope', '$http'];
            var app = angular.module("anykeyApp", ['ngRoute']);

            function configFunction($httpProvider) {
                $httpProvider.defaults.cache = false;
            }

            Users.configFunction = configFunction;

            configFunction.$inject = ['$httpProvider'];

            app.config(configFunction);
            app.controller('UserCtrl', UserCtrl);
        })(Users || (Users = {}));
    </script>
}