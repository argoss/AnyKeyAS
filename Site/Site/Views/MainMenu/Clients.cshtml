@using Site.Models.Extensions
@model Site.Models.MainMenu.MainMenuApiConfig

<div class="modal-body" ng-controller="ClientListCtrl" ng-cloak x-ng-init="controller.init(@Json.Encode(Model.ClientsUrl))">
    <div class="row">
        <button type="button" class="btn btn-default" ng-click="controller.clientEdit()">Добавить нового клиента</button>@*href="@Url.Action("ClientEdit", "Client")*@
    </div>
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Имя сокращенно</th>
                <th>Имя</th>
                <th>Адрес</th>
                <th>Личный телефон</th>
                <th>Рабочий телефон</th>
                <th></th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="item in items">
                <td>
                    <span ng-bind="item.ShortName"></span>
                </td>
                <td>
                    <span ng-bind="item.Name"></span>
                </td>
                <td>
                    <span ng-bind="item.Address"></span>
                </td>
                <td>
                    <span ng-bind="item.OwnPhone"></span>
                </td>
                <td>
                    <span ng-bind="item.WorkPhone"></span>
                </td>
                <td class="w-16">
                    <a class="btn-link" ng-click="controller.clientEdit(item.Id)" title="Редактировать" data-toggle="tooltip" data-placement="top">
                        <span class="glyphicon glyphicon-edit"></span>
                    </a>
                </td>
                <td class="w-16">
                    <a class="btn-link remove" title="Удалить" ng-click="controller.showRemoveDialog(item.Id)" data-toggle="tooltip" data-placement="left">
                        <span class="glyphicon glyphicon-remove"></span>
                    </a>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<script type="text/ng-template" id="clientRemoveDialog.html">
    <div class="modal-header">
        <button type="button" ng-click="controller.closeDialog()" class="close" data-dismiss="modal" aria-hidden="true">
            <span class="glyphicon glyphicon-remove"></span>
        </button>
        <h4 class="modal-title">Удаление клиента</h4>
    </div>
    <div class="modal-body">
        Вы уверены что хотите удалить клиента '<span ng-bind="currentItem.Name"></span>'?
    </div>
    <div class="modal-footer">
        <form action="#" method="POST">
            <button type="button" ng-click="controller.closeDialog()" class="btn btn-default" data-dismiss="modal">Нет</button>
            <button type="button" ng-click="controller.clientRemove()" class="btn btn-primary">Да</button>
        </form>
    </div>
</script>
